# GitHub Actions Workflows

## üìã –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö workflow –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- **Component Tests** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –∫–∞–∂–¥—ã–π push
- **E2E Tests** - –≤—Ä—É—á–Ω—É—é –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é

## üîÑ Workflows

### `test.yml` - Component Tests (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

**–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏:**
- Push –≤ **–ª—é–±—É—é** –≤–µ—Ç–∫—É
- Pull Request –≤ **–ª—é–±—É—é** –≤–µ—Ç–∫—É

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Input, Card, RichTextEditor, –∏ —Ç.–¥.)
- –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã (~2-3 –º–∏–Ω—É—Ç—ã)
- 60 —Ç–µ—Å—Ç–æ–≤

**–ü–æ—á–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ë—ã—Å—Ç—Ä—ã–µ
- –ù–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞
- –õ–æ–≤—è—Ç –±–∞–≥–∏ –≤ UI —Å—Ä–∞–∑—É

---

### `e2e.yml` - E2E Tests (–í—Ä—É—á–Ω—É—é)

**–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –¢–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ GitHub UI
- –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –ª—é–±—É—é –≤–µ—Ç–∫—É

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç:**
- –ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–æ–∏—Å–∫
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ (~3-4 –º–∏–Ω—É—Ç—ã)
- 7 —Ç–µ—Å—Ç–æ–≤

**–ü–æ—á–µ–º—É –≤—Ä—É—á–Ω—É—é:**
- –ú–µ–¥–ª–µ–Ω–Ω—ã–µ
- –¢—Ä–µ–±—É—é—Ç –ø–æ–ª–Ω—ã–π Supabase —Å—Ç–µ–∫
- –ó–∞–ø—É—Å–∫–∞–µ—à—å –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–ª–æ—É

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –≤—Ä—É—á–Ω—É—é

### –ß–µ—Ä–µ–∑ GitHub UI:

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Actions**
2. –í—ã–±–µ—Ä–∏ workflow **"E2E Tests (Manual)"** —Å–ª–µ–≤–∞
3. –ù–∞–∂–º–∏ **"Run workflow"** —Å–ø—Ä–∞–≤–∞
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–∫–∞–∂–∏ –≤–µ—Ç–∫—É –∏–ª–∏ –æ—Å—Ç–∞–≤—å –ø—É—Å—Ç—ã–º –¥–ª—è —Ç–µ–∫—É—â–µ–π
5. –ù–∞–∂–º–∏ –∑–µ–ª—ë–Ω—É—é –∫–Ω–æ–ø–∫—É **"Run workflow"**

### –ß–µ—Ä–µ–∑ GitHub CLI:

```bash
# –ù–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–µ
gh workflow run e2e.yml

# –ù–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ç–∫–µ
gh workflow run e2e.yml --ref feature/my-branch

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –≤–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ input
gh workflow run e2e.yml -f branch=feature/my-branch
```

---

## üîß –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–∞–∂–¥–æ–º workflow:

### Component Tests (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
1. ‚úÖ Checkout –∫–æ–¥–∞
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`npm ci`)
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI
5. ‚úÖ –ó–∞–ø—É—Å–∫ Supabase
6. ‚úÖ –ó–∞–ø—É—Å–∫ Next.js dev server
7. ‚úÖ –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
8. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
9. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

### E2E Tests (–≤—Ä—É—á–Ω—É—é)
1. ‚úÖ Checkout –∫–æ–¥–∞ (–≤—ã–±—Ä–∞–Ω–Ω–∞—è –≤–µ—Ç–∫–∞)
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js 18
3. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (`npm ci`)
4. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Supabase CLI
5. ‚úÖ –ó–∞–ø—É—Å–∫ Supabase (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π)
6. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
7. ‚úÖ –ó–∞–ø—É—Å–∫ Next.js dev server
8. ‚úÖ –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤
9. ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ + –≤–∏–¥–µ–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
10. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

## üìä –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –í GitHub UI:
1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Actions**
2. –í—ã–±–µ—Ä–∏ workflow run
3. –ü–æ—Å–º–æ—Ç—Ä–∏ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ job
4. –°–∫–∞—á–∞–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—Å–∫—Ä–∏–Ω—à–æ—Ç—ã/–≤–∏–¥–µ–æ) –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã —É–ø–∞–ª–∏

### –ë–µ–π–¥–∂–∏ –≤ README:
```markdown
[![Component Tests](https://github.com/YOUR_USERNAME/EverFreeNote/actions/workflows/test.yml/badge.svg)](https://github.com/YOUR_USERNAME/EverFreeNote/actions/workflows/test.yml)
[![E2E Tests](https://github.com/YOUR_USERNAME/EverFreeNote/actions/workflows/e2e.yml/badge.svg)](https://github.com/YOUR_USERNAME/EverFreeNote/actions/workflows/e2e.yml)
```

## ‚è±Ô∏è –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

| Workflow | –ö–æ–≥–¥–∞ | –í—Ä–µ–º—è | –¢–µ—Å—Ç—ã |
|----------|-------|-------|-------|
| Component Tests | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ~2-3 –º–∏–Ω | 60 |
| E2E Tests | –í—Ä—É—á–Ω—É—é | ~3-4 –º–∏–Ω | 7 |

**–ò—Ç–æ–≥–æ:**
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º push: ~2-3 –º–∏–Ω—É—Ç—ã (—Ç–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- –ü—Ä–∏ —Ä—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ E2E: +3-4 –º–∏–Ω—É—Ç—ã

## üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —ç–º—É–ª—è—Ü–∏—è CI

–•–æ—á–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –≤ CI –ª–æ–∫–∞–ª—å–Ω–æ?

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏ Supabase
npm run db:start

# 2. –ó–∞–ø—É—Å—Ç–∏ Next.js
npm run dev

# 3. –ó–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã
npm run test:component  # –∏–ª–∏
npm run test:e2e        # –∏–ª–∏
npm run test:all
```

## üêõ –û—Ç–ª–∞–¥–∫–∞ —É–ø–∞–≤—à–∏—Ö —Ç–µ—Å—Ç–æ–≤

1. **–°–∫–∞—á–∞–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã:**
   - Actions ‚Üí Failed run ‚Üí Artifacts ‚Üí Download

2. **–ü–æ—Å–º–æ—Ç—Ä–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç—ã:**
   - `component-test-screenshots/` –∏–ª–∏
   - `e2e-test-screenshots/`

3. **–ü–æ—Å–º–æ—Ç—Ä–∏ –≤–∏–¥–µ–æ (—Ç–æ–ª—å–∫–æ E2E):**
   - `e2e-test-videos/`

4. **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–∏ –ª–æ–∫–∞–ª—å–Ω–æ:**
   ```bash
   npm run db:start
   npm run dev
   npx cypress run --spec "cypress/e2e/failing-test.cy.js"
   ```

## üí° –°–æ–≤–µ—Ç—ã

### –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫–æ–º–º–∏—Ç–∞
```bash
git commit -m "docs: update README [skip ci]"
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E –ª–æ–∫–∞–ª—å–Ω–æ –ø–µ—Ä–µ–¥ push
```bash
npm run db:start
npm run dev
npm run test:e2e
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å E2E –≤ CI –Ω–∞ feature –≤–µ—Ç–∫–µ
1. GitHub ‚Üí Actions ‚Üí E2E Tests (Manual)
2. Run workflow ‚Üí –≤—ã–±–µ—Ä–∏ —Å–≤–æ—é –≤–µ—Ç–∫—É
3. –î–æ–∂–¥–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å E2E –≤ CI?
- ‚úÖ –ü–µ—Ä–µ–¥ –º–µ—Ä–∂–µ–º –≤ `main`
- ‚úÖ –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ CRUD –æ–ø–µ—Ä–∞—Ü–∏—è—Ö
- ‚úÖ –ü–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
- ‚ùå –ù–µ –Ω—É–∂–Ω–æ –Ω–∞ –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç (–º–µ–¥–ª–µ–Ω–Ω–æ)

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
.github/
‚îî‚îÄ‚îÄ workflows/
    ‚îú‚îÄ‚îÄ test.yml          # Component Tests (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ e2e.yml           # E2E Tests (–≤—Ä—É—á–Ω—É—é)
    ‚îî‚îÄ‚îÄ README.md         # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîê Secrets

–ü—Ä–æ–µ–∫—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç secrets –¥–ª—è CI, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π Supabase.

–î–ª—è production –¥–µ–ø–ª–æ—è –¥–æ–±–∞–≤—å –≤ Settings ‚Üí Secrets:
- `SUPABASE_URL`
- `SUPABASE_ANON_KEY`

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [Cypress CI Documentation](https://docs.cypress.io/guides/continuous-integration/introduction)
- [Supabase CLI Documentation](https://supabase.com/docs/guides/cli)

