# üèóÔ∏è EverFreeNote ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 17 –æ–∫—Ç—è–±—Ä—è 2025  
> **–í–µ—Ä—Å–∏—è:** 1.0  
> **–¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** Single Page Application (SPA)

---

## üìê –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –¢–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: **SPA (Single Page Application)**

**–ü—Ä–∏–Ω—Ü–∏–ø:** –û–¥–Ω–∞ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ JavaScript –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Frontend (Client-Side)          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ Next.js 14 (App Router)              ‚îÇ
‚îÇ  ‚Ä¢ React 18                              ‚îÇ
‚îÇ  ‚Ä¢ Tailwind CSS + shadcn/ui              ‚îÇ
‚îÇ  ‚Ä¢ Static Export (output: 'export')     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì HTTPS
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Backend (BaaS)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ Supabase (PostgreSQL)                 ‚îÇ
‚îÇ  ‚Ä¢ Supabase Auth (OAuth)                 ‚îÇ
‚îÇ  ‚Ä¢ Supabase Storage                      ‚îÇ
‚îÇ  ‚Ä¢ Row Level Security (RLS)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Hosting                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚Ä¢ Cloudflare Pages                      ‚îÇ
‚îÇ  ‚Ä¢ Static Files (HTML/CSS/JS)            ‚îÇ
‚îÇ  ‚Ä¢ Edge CDN                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–æ—Ä—Ç (Static Export)**

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```javascript
// next.config.js
const nextConfig = {
  output: 'export',
  images: { unoptimized: true },
  trailingSlash: true,
}
```

**–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ Next.js –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —á–∏—Å—Ç—ã–µ HTML/CSS/JS —Ñ–∞–π–ª—ã
- ‚úÖ –ù–µ—Ç —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (SSR)
- ‚úÖ –ù–µ—Ç API Routes
- ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ –ª—é–±–æ–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `'use client'`

### 2. **–ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase**

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: BaaS (Backend as a Service)**

```javascript
// –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞
const supabase = createClient()

// –ü—Ä–∏–º–µ—Ä—ã –æ–ø–µ—Ä–∞—Ü–∏–π
await supabase.from('notes').select('*')           // –ß—Ç–µ–Ω–∏–µ
await supabase.from('notes').insert(data)          // –°–æ–∑–¥–∞–Ω–∏–µ
await supabase.from('notes').update(data)          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
await supabase.from('notes').delete()              // –£–¥–∞–ª–µ–Ω–∏–µ
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- Row Level Security (RLS) –Ω–∞ —É—Ä–æ–≤–Ω–µ Supabase
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
- –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –±—ç–∫–µ–Ω–¥–µ

### 3. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**

**–ü—Ä–∞–≤–∏–ª–∞:**
- ‚ùå **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º** –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã (`[param]`) —Å `output: 'export'`
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º** –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–µ–º** query parameters –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: /app/tags/[tag]/page.tsx (–∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å static export)

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
const [filterByTag, setFilterByTag] = useState(null)
const handleTagClick = (tag) => {
  setFilterByTag(tag)
  fetchNotes('', tag)
}
```

---

## üìä –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö

#### ‚ùå **–ù–ï –î–ï–õ–ê–¢–¨:**
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –í–°–ï–• –∑–∞–ø–∏—Å–µ–π
const { data } = await supabase.from('notes').select('*')
```

#### ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û:**

**1. –ü–∞–≥–∏–Ω–∞—Ü–∏—è**
```javascript
const PAGE_SIZE = 50

const fetchNotes = async (page = 0) => {
  const { data } = await supabase
    .from('notes')
    .select('*')
    .order('updated_at', { ascending: false })
    .range(page * PAGE_SIZE, (page + 1) * PAGE_SIZE - 1)
  
  return data
}
```

**2. –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**
```javascript
// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Supabase, –∞ –Ω–µ –≤ JavaScript
let query = supabase.from('notes').select('*')

if (tagFilter) {
  query = query.contains('tags', [tagFilter])
}

if (searchQuery) {
  query = query.or(`title.ilike.%${searchQuery}%,description.ilike.%${searchQuery}%`)
}

const { data } = await query
```

**3. –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Infinite Scroll)**
```javascript
const [notes, setNotes] = useState([])
const [page, setPage] = useState(0)
const [hasMore, setHasMore] = useState(true)

const loadMoreNotes = async () => {
  const newNotes = await fetchNotes(page)
  if (newNotes.length < PAGE_SIZE) setHasMore(false)
  setNotes(prev => [...prev, ...newNotes])
  setPage(prev => prev + 1)
}
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–î–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (100+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤):**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—é (`react-window` –∏–ª–∏ `react-virtualized`)
- –†–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**–î–ª—è –ø–æ–∏—Å–∫–∞:**
- –î–µ–±–∞—É–Ω—Å–∏–Ω–≥ (–∑–∞–¥–µ—Ä–∂–∫–∞ 300-500–º—Å –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º)
- –û—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (AbortController)

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)

**–í—Å–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ Supabase:**

```sql
-- –ü—Ä–∏–º–µ—Ä: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏
CREATE POLICY "Users can view own notes"
  ON notes FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own notes"
  ON notes FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can update own notes"
  ON notes FOR UPDATE
  USING (auth.uid() = user_id);

CREATE POLICY "Users can delete own notes"
  ON notes FOR DELETE
  USING (auth.uid() = user_id);
```

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- OAuth —á–µ—Ä–µ–∑ Supabase (Google, GitHub, –∏ —Ç.–¥.)
- Session management —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è Supabase SDK
- Tokens —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
EverFreeNote/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx            # –û–±—â–∏–π layout
‚îÇ   ‚îú‚îÄ‚îÄ globals.css          # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ auth/
‚îÇ       ‚îî‚îÄ‚îÄ callback/
‚îÇ           ‚îî‚îÄ‚îÄ page.tsx      # OAuth callback
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ features/            # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ —Ñ–∏—á–∞–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/            # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (AuthShell)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notes/           # –ó–∞–º–µ—Ç–∫–∏ (Sidebar, NoteList, NoteEditor, NoteView)
‚îÇ   ‚îú‚îÄ‚îÄ ui/                  # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...                  # –û–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useNoteAppController.ts # –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ useNotesQuery.ts     # React Query —Ö—É–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ useNotesMutations.ts # React Query —Ö—É–∫–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ services/            # Service Layer (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notes.ts         # –°–µ—Ä–≤–∏—Å –∑–∞–º–µ—Ç–æ–∫ (CRUD)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search.ts        # –°–µ—Ä–≤–∏—Å –ø–æ–∏—Å–∫–∞ (FTS + Fallback)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sanitizer.ts     # –°–µ—Ä–≤–∏—Å –æ—á–∏—Å—Ç–∫–∏ HTML
‚îÇ   ‚îú‚îÄ‚îÄ adapters/            # –ê–¥–∞–ø—Ç–µ—Ä—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ browser.ts       # –ê–¥–∞–ø—Ç–µ—Ä –±—Ä–∞—É–∑–µ—Ä–Ω—ã—Ö API (–¥–ª—è React Native)
‚îÇ   ‚îú‚îÄ‚îÄ providers/           # React Context Providers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SupabaseProvider.tsx
‚îÇ   ‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ client.ts        # Supabase client singleton
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts             # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT_GUIDE.md  # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
‚îÇ   ‚îî‚îÄ‚îÄ roadmap.md           # Roadmap —Ä–∞–∑–≤–∏—Ç–∏—è
‚îú‚îÄ‚îÄ next.config.js           # Next.js –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ package.json
```

---

## üèóÔ∏è Service Layer Pattern

–í –≤–µ—Ä—Å–∏–∏ 2.0 –º—ã –≤–Ω–µ–¥—Ä–∏–ª–∏ —Å–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

1. **UI Components** (`components/`) - –¢–æ–ª—å–∫–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ù–µ –∑–Ω–∞—é—Ç –æ Supabase.
2. **Controllers/Hooks** (`hooks/`) - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏ —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ UI —Å –¥–∞–Ω–Ω—ã–º–∏.
3. **Services** (`lib/services/`) - –ß–∏—Å—Ç–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞. –ò–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É —Å Supabase.
4. **Adapters** (`lib/adapters/`) - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-–∑–∞–≤–∏—Å–∏–º—ã—Ö API (window, localStorage).

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```typescript
// Component
function NoteList() {
  const { notes } = useNoteAppController()
  return <div>{notes.map(...)}</div>
}

// Controller (Hook)
function useNoteAppController() {
  const noteService = new NoteService(supabase)
  return useQuery({ queryFn: () => noteService.getNotes(...) })
}

// Service
class NoteService {
  async getNotes(userId) {
    return this.supabase.from('notes').select('*').eq('user_id', userId)
  }
}
```

---

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ Cloudflare Pages

### Build Configuration

```bash
# Build Command
npm run build

# Build Output Directory
out/

# Node Version
18 –∏–ª–∏ –≤—ã—à–µ
```

### Environment Variables

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ Cloudflare Pages Settings:

```bash
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
```

### –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

1. **Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** ‚Üí Cloudflare –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç build
2. **Build –ø—Ä–æ—Ü–µ—Å—Å:**
   ```
   npm install
   npm run build
   ‚Üí –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–∞–ø–∫–∞ out/ —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
   ```
3. **Deploy** ‚Üí –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –Ω–∞ Cloudflare Edge CDN
4. **–ì–æ—Ç–æ–≤–æ** ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ URL

---

## üé® –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö —Ñ–∏—á

### –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á

#### ‚úÖ –ü–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ª—é–±–æ–π —Ñ–∏—á–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥?**
   - –ï—Å–ª–∏ –¥–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase Functions –∏–ª–∏ Database Functions
   - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

2. **–ù—É–∂–Ω—ã –ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Ä–æ—É—Ç—ã?**
   - –ï—Å–ª–∏ –¥–∞ ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–º–µ—Å—Ç–æ —Ä–æ—É—Ç–∏–Ω–≥–∞
   - –ü—Ä–∏–º–µ—Ä: —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –º–æ–¥–∞–ª–∫–∏, —Ç–∞–±—ã

3. **–ë—É–¥–µ—Ç –ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –º–Ω–æ–≥–æ –¥–∞–Ω–Ω—ã—Ö?**
   - –ï—Å–ª–∏ –¥–∞ ‚Üí —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é + —Å–µ—Ä–≤–µ—Ä–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.range()` –∏ `.limit()`

4. **–ù—É–∂–Ω–∞ –ª–∏ —Ä–µ–∞–ª-—Ç–∞–π–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è?**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase Realtime:
     ```javascript
     supabase
       .channel('notes-changes')
       .on('postgres_changes', { event: '*', schema: 'public', table: 'notes' }, 
         (payload) => handleRealtimeUpdate(payload)
       )
       .subscribe()
     ```

5. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ –ª–∏ —Å `output: 'export'`?**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ:
     - API Routes (`/app/api/`)
     - Server Actions
     - Server Components —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–æ–π
     - `getServerSideProps`, `getStaticPaths` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
```javascript
// –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ /app/category/[slug]/page.tsx
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
const [activeCategory, setActiveCategory] = useState(null)
```

#### ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞
```javascript
// –ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ä–æ—É—Ç—ã
// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
const [isModalOpen, setIsModalOpen] = useState(false)
<Dialog open={isModalOpen} onOpenChange={setIsModalOpen}>
```

#### ‚úÖ –ü–æ–∏—Å–∫
```javascript
// –°–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è + –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥
const debouncedSearch = useMemo(
  () => debounce((query) => fetchNotes(query), 300),
  []
)
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —ç–∫—Å–ø–æ—Ä—Ç–∞

```bash
npm run build
# –î–æ–ª–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É out/ –±–µ–∑ –æ—à–∏–±–æ–∫
# –í—Å–µ —Ä–æ—É—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ ‚óã (Static)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Cloudflare

```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
npx serve out/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
# - –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è
# - –ù–µ—Ç 404 –æ—à–∏–±–æ–∫
# - API –∑–∞–ø—Ä–æ—Å—ã –∫ Supabase —Ä–∞–±–æ—Ç–∞—é—Ç
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –≤—ã—Ä–∞—Å—Ç–µ—Ç

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

1. **Code Splitting**
   ```javascript
   // –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   const HeavyEditor = lazy(() => import('./HeavyEditor'))
   ```

2. **React Query / SWR**
   ```javascript
   // –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   const { data, isLoading } = useQuery(['notes', page], 
     () => fetchNotes(page)
   )
   ```

3. **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**
   ```javascript
   import { FixedSizeList } from 'react-window'
   // –†–µ–Ω–¥–µ—Ä —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   ```

4. **Optimistic Updates**
   ```javascript
   // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å—Ä–∞–∑—É, –Ω–µ –∂–¥–µ–º –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞
   setNotes(prev => [...prev, newNote])
   await supabase.from('notes').insert(newNote)
   ```

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –≤ –±—É–¥—É—â–µ–º (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)

### –ï—Å–ª–∏ SPA –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç—å

**–°—Ü–µ–Ω–∞—Ä–∏–∏ –∫–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è SSR:**
- SEO –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–µ–Ω –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ù—É–∂–Ω—ã server-side –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- –¢—Ä–µ–±—É–µ—Ç—Å—è Edge Computing

**–ü—É—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
1. –£–¥–∞–ª–∏—Ç—å `output: 'export'` –∏–∑ `next.config.js`
2. –î–æ–±–∞–≤–∏—Ç—å Cloudflare Next.js –∞–¥–∞–ø—Ç–µ—Ä
3. –î–æ–±–∞–≤–∏—Ç—å API Routes –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏
4. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —á–∞—Å—Ç–∏ –ª–æ–≥–∏–∫–∏ –≤ Server Components

**–ù–û:** –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–º–µ—Ç–æ–∫ (–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö) SPA ‚Äî –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.

---

## üìù Changelog –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| –î–∞—Ç–∞       | –í–µ—Ä—Å–∏—è | –ò–∑–º–µ–Ω–µ–Ω–∏–µ                                    |
|------------|--------|----------------------------------------------|
| 2025-10-17 | 1.0    | –ü–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏     |

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**EverFreeNote = SPA + Supabase BaaS + Cloudflare Pages**

- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –õ–µ–≥–∫–∏–π –¥–µ–ø–ª–æ–π
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ù–∏–∑–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–í—Å–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –¥–æ–ª–∂–Ω—ã —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º.**

–ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö ‚Äî –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —ç—Ç–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É. üöÄ

