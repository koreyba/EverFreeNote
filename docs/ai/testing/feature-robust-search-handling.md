---
phase: testing
title: Стратегия тестирования
description: Определение подхода к тестированию, тестовых случаев и обеспечения качества
---

# Стратегия тестирования

## Цели покрытия тестами
**К какому уровню тестирования мы стремимся?**

- 100% покрытие измененной функции `buildTsQuery`.
- Проверка интеграции через `SearchService`.

## Модульные тесты
**Какие отдельные компоненты требуют тестирования?**

### `core/utils/search.ts`
- [ ] Тест: Обычный текст (`hello world`) -> `hello:* & world:*`
- [ ] Тест: Спецсимволы (`hello & world`) -> `hello:* & world:*` (амперсанд удаляется/заменяется)
- [ ] Тест: Только спецсимволы (`)))`) -> Возвращает `null` или пустую строку (не выбрасывает ошибку)
- [ ] Тест: Код (`function()`) -> `function:*`
- [ ] Тест: Пустая строка -> Ошибка или null (в зависимости от контракта, но для UI лучше null)

## Интеграционные тесты
**Как мы тестируем взаимодействие компонентов?**

- [ ] Проверка `SearchService.searchNotes` с запросом `)))`. Должен вернуть пустой массив, а не упасть.

## Тестовые данные
**Какие данные мы используем для тестирования?**

- Используем существующие моки Supabase.

## Ручное тестирование
**Что требует проверки человеком?**

- Ввести `)` в строку поиска в UI. Приложение не должно показывать "Error boundary" или тост с ошибкой. Список заметок должен либо фильтроваться (если есть совпадения), либо показывать "Нет результатов", либо показывать все (если запрос игнорируется). Логичнее - "Нет результатов".
